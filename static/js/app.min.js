!function(){"use strict";angular.module("project-staffing",["ngRoute","ngAutocomplete","employee-directives","ngAnimate"])}(),function(){"use strict";angular.module("project-staffing").controller("AddressController",["$http","$scope",function(e,o){o.result="",o.details={},o.options={},o.form={type:"geocode",watchEnter:!0},this.saveAddress=function(t){console.log("update existing employee"),console.log(o.details);var l=Object.keys(o.details.geometry.location);t.homeaddress={},t.homeaddress.longitude=o.details.geometry.location[l[0]],t.homeaddress.latitude=o.details.geometry.location[l[1]],e.post("http://localhost:9000/api/mongo/employees/"+t._id,JSON.stringify(t))}}])}(),function(){"use strict";angular.module("project-staffing").controller("CustomerController",["$http","$scope","$filter",function(e,o){function t(){console.log("initialze map");var e={zoom:9,center:r,mapTypeId:google.maps.MapTypeId.ROADMAP},o=new google.maps.Map(document.getElementById("map-canvas"),e);if(s){var t={strokeColor:"#4CC417",strokeOpacity:.8,strokeWeight:2,fillColor:"#4CC417",fillOpacity:.35,map:o,center:r,radius:5e4};new google.maps.Circle(t),new google.maps.Marker({position:r,map:o,title:"Found Address"})}var l,a,c,m=new google.maps.InfoWindow;for(a=0;a<i.length;a++)c=i[a],l=new google.maps.Marker({position:new google.maps.LatLng(c.companyaddress.longitude,c.companyaddress.latitude),map:o,icon:n,title:c.company}),google.maps.event.addListener(l,"click",function(e,t){return function(){var l=i[t],s="<p><b>"+l.company+'</b></p><table class="table"><tr>';s+='<tr><td><span class="label label-primary">Industry</span></td><td>'+l.industry+"</td></tr>",s+='<tr><td><span class="label label-primary">Address</span></td><td>'+l.address+"</td></tr></table>",m.setContent(s),m.open(o,e)}}(l,a))}console.log("Customer Controller");var l=this;l.customers=[];var s=!1;this.customer={},o.details={},o.options={},o.form={type:"geocode",watchEnter:!0},e.get("http://localhost:9000/api/mongo/customers").success(function(e){console.log("Get all customers from backend"),console.log(e),l.customers=e}),this.addCustomer=function(){console.log("add customer"),this.customer.companyaddress={};var t=Object.keys(o.details.geometry.location);this.customer.companyaddress.longitude=o.details.geometry.location[t[0]],this.customer.companyaddress.latitude=o.details.geometry.location[t[1]],e.post("http://localhost:9000/api/mongo/customers",JSON.stringify(this.customer)),e.get("http://localhost:9000/api/mongo/customers").success(function(e){console.log("Get all customers from backend"),l.customers=e,console.log(e)})},this.deleteCustomer=function(o){console.log("delete customer "+o),e.delete("http://localhost:9000/api/mongo/customers/"+o);for(var t in l.customers)console.log(l.customers[t]),console.log(t),l.customers[t]._id===o&&(console.log("Delete item from array"),l.customers.splice(t,1))},this.editCustomer=function(e){for(var o in l.customers)l.customers[o]._id===e&&(console.log("Edit Customer"),this.customer=l.customers[o])},this.resetForm=function(){console.log("reset form"),this.customer={}};var r={lat:51.161295,lng:7.010175000000004},n={url:"img/company-icon.png",size:new google.maps.Size(64,64),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,64)};o.details={};var i=[],s=!1;this.searchCustomers=function(){console.log("search customers"),o.details.geometry&&(r=o.details.geometry.location,s=!0);var l="http://localhost:9000/api/mongo/customers";e.get(l).success(function(e){console.log("Get customers from backend"),i=e,t()})},google.maps.event.addDomListener(window,"load",t)}])}(),function(){"use strict";angular.module("project-staffing").controller("DashboardController",["$http","$scope","$filter",function(){console.log("Dashboard Controller")}])}(),function(){"use strict";angular.module("project-staffing").controller("EmployeeController",["$http",function(e){var o=this;this.tab=1,this.employees=o.employees,this.employee={},o.employees=[],e.get("http://localhost:9000/api/mongo/employees").success(function(e){console.log("Get all employees from backend"),o.employees=e}),this.showTabs=function(){return console.log("show tabs"),void 0===this.employee._id?!1:!0},this.editEmployee=function(e){for(var o in this.employees)this.employees[o]._id===e&&(console.log("Edit Employee"),this.employee=this.employees[o])},this.resetForm=function(){this.employee={}},this.addEmployee=function(){void 0===this.employee._id?(console.log("add new employee"),e.post("http://localhost:9000/api/mongo/employees",JSON.stringify(this.employee))):(console.log("update existing employee"),e.post("http://localhost:9000/api/mongo/employees/"+this.employee._id,JSON.stringify(this.employee))),e.get("http://localhost:9000/api/mongo/employees").success(function(e){console.log("Update all employees from backend"),o.employees=e})},this.deleteEmployee=function(o){console.log("Delete employee with id: "+JSON.stringify(o)),e.delete("http://localhost:9000/api/mongo/employees/"+o);for(var t in this.employees)console.log(this.employees[t]),console.log(t),this.employees[t]._id===o&&(console.log("Delete item from array"),this.employees.splice(t,1))}}])}(),function(){"use strict";angular.module("project-staffing").controller("NavigationController",["$scope",function(e){e.active="",e.set=function(o){e.active=o}}])}(),function(){"use strict";angular.module("project-staffing").controller("ProjectController",["$http",function(e){this.deleteProject=function(o,t){console.log("delete project "+o),console.log(t.projects[o]),t.projects.splice(o,1),e.post("http://localhost:9000/api/mongo/employees/"+t._id+"/projects",JSON.stringify(t))},this.addProject=function(o){console.log(o),null==o.projects&&(o.projects=[]),o.projects.push(this.project),e.post("http://localhost:9000/api/mongo/employees/"+o._id+"/projects",JSON.stringify(o)),this.project={}}}])}(),function(){"use strict";angular.module("project-staffing").controller("SkillController",["$http",function(e){this.skill="",this.deleteSkill=function(o,t){console.log("delete skill "+o),console.log(t.skills[o]),t.skills.splice(o,1),e.post("http://localhost:9000/api/mongo/employees/"+t._id+"/skills",JSON.stringify(t))},this.addSkill=function(o){for(var t in o.skills)if(t===this.skill)return;null==o.skills&&(o.skills=[]),o.skills.push(this.skill),e.post("http://localhost:9000/api/mongo/employees/"+o._id+"/skills",JSON.stringify(o)),this.skill=""}}])}(),function(){"use strict";angular.module("project-staffing").controller("StaffingController",["$http","$scope","$filter",function(e,o,t){function l(){console.log("initialze map");var e={zoom:9,center:s,mapTypeId:google.maps.MapTypeId.ROADMAP},o=new google.maps.Map(document.getElementById("map-canvas"),e);if(i){var l={strokeColor:"#4CC417",strokeOpacity:.8,strokeWeight:2,fillColor:"#4CC417",fillOpacity:.35,map:o,center:s,radius:5e4};new google.maps.Circle(l),new google.maps.Marker({position:s,map:o,title:"Selected Customer"})}var a,c,m,p=new google.maps.InfoWindow;for(c=0;c<n.length;c++)m=n[c],a=new google.maps.Marker({position:new google.maps.LatLng(m.homeaddress.longitude,m.homeaddress.latitude),map:o,icon:r,title:m.name}),google.maps.event.addListener(a,"click",function(e,l){return function(){var s=n[l],r="<p><b>"+s.name+"</b></p>";if(s.skills){r+='<p><span class="label label-success">Skills</span><table class="table"><tr><td>';for(var i=0;i<s.skills.length;i++)r+=s.skills[i]+", ";r=r.slice(0,-2),r+="</td></tr></table></p>"}else r+="<br>No skills.";if(s.projects){r+='<p><span class="label label-success">Projects</span><table class="table">',s.projects.sort(function(e,o){return e.start<o.start?1:0});for(var a=0;a<s.projects.length;a++){var c=s.projects[a].start,m=s.projects[a].end;void 0===m&&(m="Current");var d=s.projects[a].name;r+='<tr><td><span class="label label-primary">'+t("date")(c,"yyyy-MM-dd")+"</span></td>",r+='<td><span class="label label-info">'+t("date")(m,"yyyy-MM-dd")+"</span></td><td>"+d+"</td></tr>"}r+="</table></p>"}else r+="<br>No projects.";p.setContent(r),p.open(o,e)}}(a,c))}console.log("Staffing Controller");var s={lat:51.161295,lng:7.010175000000004},r={url:"img/default-face.png",size:new google.maps.Size(64,64),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,64)};o.details={},o.skillQuery="";var n=[],i=!1;this.searchCustomer=function(){if(console.log("search customer"),o.details.geometry){var t=Object.keys(o.details.geometry.location);s.lat=o.details.geometry.location[t[0]],s.lng=o.details.geometry.location[t[1]],i=!0}var r="http://localhost:9000/api/mongo/employees";if(o.skillQuery){for(var a=o.skillQuery.toLowerCase().split(","),c="",m=0;m<a.length;m++){var p=a[m].trim();c+="&skills="+p}r="http://localhost:9000/api/mongo/search/employees/skills?"+c}e.get(r).success(function(e){console.log("Get employees from backend"),n=e,l()})},google.maps.event.addDomListener(window,"load",l)}])}(),function(){"use strict";var e=angular.module("employee-directives",[]);e.directive("navigation",function(){return{restrict:"E",templateUrl:"navigation.html"}}),e.directive("employeeTable",function(){return{restrict:"E",templateUrl:"employee-table.html"}}),e.directive("employeeList",function(){return{restrict:"E",templateUrl:"employee-list.html"}}),e.directive("employeeForm",function(){return{restrict:"E",templateUrl:"employee-form.html"}}),e.directive("skillForm",function(){return{restrict:"E",templateUrl:"skill-form.html"}}),e.directive("projectForm",function(){return{restrict:"E",templateUrl:"project-form.html"}}),e.directive("homeaddressForm",function(){return{restrict:"E",templateUrl:"homeaddress-form.html"}}),e.directive("searchaddressForm",function(){return{restrict:"E",templateUrl:"searchaddress-form.html"}}),e.directive("customerTable",function(){return{restrict:"E",templateUrl:"customer-table.html"}}),e.directive("searchCustomerAddressForm",function(){return{restrict:"E",templateUrl:"searchcustomeraddress-form.html"}})}(),function(){"use strict";angular.module("project-staffing").config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/index.html"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardController",controllerAs:"dashboardCtrl"}).when("/list-employees",{templateUrl:"views/list_employees.html",controller:"EmployeeController",controllerAs:"employeeCtrl"}).when("/add-employee",{templateUrl:"views/add_employee.html",controller:"EmployeeController",controllerAs:"employeeCtrl"}).when("/list-customers",{templateUrl:"views/list_customers.html",controller:"CustomerController",controllerAs:"customerCtrl"}).when("/staffing",{templateUrl:"views/staff_project.html",controller:"StaffingController",controllerAs:"staffingCtrl"}).when("/add-customer",{templateUrl:"views/add_customer.html",controller:"CustomerController",controllerAs:"customerCtrl"}).when("/help",{templateUrl:"views/help.html"}).otherwise({redirectTo:"/"})}])}();