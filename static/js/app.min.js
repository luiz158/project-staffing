!function(){"use strict";angular.module("project-staffing",["ngRoute","ngAutocomplete","employee-directives","ngAnimate"])}(),function(){"use strict";angular.module("project-staffing").controller("AddressController",["$http","$scope",function(e,o){o.result="",o.details={},o.options={},o.form={type:"geocode",watchEnter:!0},this.saveAddress=function(t){console.log("update existing employee"),console.log(o.details),t.homeaddress=o.details.geometry.location,e.post("http://localhost:9000/api/mongo/employees/"+t._id,JSON.stringify(t))}}])}(),function(){"use strict";angular.module("project-staffing").controller("CustomerController",["$http","$scope","$filter",function(e,o){console.log("Customer Controller");var t=this;t.customers=[],this.customer={},o.details={},o.options={},o.form={type:"geocode",watchEnter:!0},e.get("http://localhost:9000/api/mongo/customers").success(function(e){console.log("Get all customers from backend"),console.log(e),t.customers=e}),this.addCustomer=function(){console.log("add customer"),this.customer.companyaddress=o.details.geometry.location,e.post("http://localhost:9000/api/mongo/customers",JSON.stringify(this.customer)),e.get("http://localhost:9000/api/mongo/customers").success(function(e){console.log("Get all customers from backend"),t.customers=e,console.log(e)})},this.deleteCustomer=function(o){console.log("delete customer "+o),e.delete("http://localhost:9000/api/mongo/customers/"+o);for(var l in t.customers)console.log(t.customers[l]),console.log(l),t.customers[l]._id===o&&(console.log("Delete item from array"),t.customers.splice(l,1))},this.resetForm=function(){console.log("reset form"),this.customer={}}}])}(),function(){"use strict";angular.module("project-staffing").controller("DashboardController",["$http","$scope","$filter",function(){console.log("Dashboard Controller")}])}(),function(){"use strict";angular.module("project-staffing").controller("EmployeeController",["$http",function(e){var o=this;this.tab=1,this.employees=o.employees,this.employee={},o.employees=[],e.get("http://localhost:9000/api/mongo/employees").success(function(e){console.log("Get all employees from backend"),o.employees=e}),this.showTabs=function(){return console.log("show tabs"),void 0===this.employee._id?!1:!0},this.editEmployee=function(e){for(var o in this.employees)this.employees[o]._id===e&&(console.log("Edit Employee"),this.employee=this.employees[o])},this.resetForm=function(){this.employee={}},this.addEmployee=function(){void 0===this.employee._id?(console.log("add new employee"),e.post("http://localhost:9000/api/mongo/employees",JSON.stringify(this.employee))):(console.log("update existing employee"),e.post("http://localhost:9000/api/mongo/employees/"+this.employee._id,JSON.stringify(this.employee))),e.get("http://localhost:9000/api/mongo/employees").success(function(e){console.log("Update all employees from backend"),o.employees=e}),this.employee={}},this.deleteEmployee=function(o){console.log("Delete employee with id: "+JSON.stringify(o)),e.delete("http://localhost:9000/api/mongo/employees/"+o);for(var t in this.employees)console.log(this.employees[t]),console.log(t),this.employees[t]._id===o&&(console.log("Delete item from array"),this.employees.splice(t,1))}}])}(),function(){"use strict";angular.module("project-staffing").controller("NavigationController",["$scope",function(e){e.active="",e.set=function(o){e.active=o}}])}(),function(){"use strict";angular.module("project-staffing").controller("ProjectController",["$http",function(e){this.deleteProject=function(o,t){console.log("delete project "+o),console.log(t.projects[o]),t.projects.splice(o,1),e.post("http://localhost:9000/api/mongo/employees/"+t._id+"/projects",JSON.stringify(t))},this.addProject=function(o){console.log(o),null==o.projects&&(o.projects=[]),o.projects.push(this.project),e.post("http://localhost:9000/api/mongo/employees/"+o._id+"/projects",JSON.stringify(o)),this.project={}}}])}(),function(){"use strict";angular.module("project-staffing").controller("SkillController",["$http",function(e){this.skill="",this.deleteSkill=function(o,t){console.log("delete skill "+o),console.log(t.skills[o]),t.skills.splice(o,1),e.post("http://localhost:9000/api/mongo/employees/"+t._id+"/skills",JSON.stringify(t))},this.addSkill=function(o){for(var t in o.skills)if(t===this.skill)return;null==o.skills&&(o.skills=[]),o.skills.push(this.skill),e.post("http://localhost:9000/api/mongo/employees/"+o._id+"/skills",JSON.stringify(o)),this.skill=""}}])}(),function(){"use strict";angular.module("project-staffing").controller("StaffingController",["$http","$scope","$filter",function(e,o,t){function l(){console.log("initialze map");var e={zoom:9,center:s,mapTypeId:google.maps.MapTypeId.ROADMAP},o=new google.maps.Map(document.getElementById("map-canvas"),e);if(i){var l={strokeColor:"#4CC417",strokeOpacity:.8,strokeWeight:2,fillColor:"#4CC417",fillOpacity:.35,map:o,center:s,radius:5e4};google.maps.Circle(l),google.maps.Marker({position:s,map:o,title:"Selected Customer"})}var c,a,m,p=new google.maps.InfoWindow;for(a=0;a<n.length;a++)m=n[a],c=new google.maps.Marker({position:new google.maps.LatLng(m.homeaddress.k,m.homeaddress.A),map:o,icon:r,title:m.name}),google.maps.event.addListener(c,"click",function(e,l){return function(){var s=n[l],r="<p><b>"+s.name+"</b></p>";if(s.skills){r+='<p><span class="label label-success">Skills</span><table class="table"><tr><td>';for(var i=0;i<s.skills.length;i++)r+=s.skills[i]+", ";r=r.slice(0,-2),r+="</td></tr></table></p>"}else r+="<br>No skills.";if(s.projects){r+='<p><span class="label label-success">Projects</span><table class="table">',s.projects.sort(function(e,o){return e.start<o.start?1:0});for(var c=0;c<s.projects.length;c++){var a=s.projects[c].start,m=s.projects[c].end;void 0===m&&(m="Current");var u=s.projects[c].name;r+='<tr><td><span class="label label-primary">'+t("date")(a,"yyyy-MM-dd")+"</span></td>",r+='<td><span class="label label-info">'+t("date")(m,"yyyy-MM-dd")+"</span></td><td>"+u+"</td></tr>"}r+="</table></p>"}else r+="<br>No projects.";p.setContent(r),p.open(o,e)}}(c,a))}console.log("Staffing Controller");var s={lat:51.161295,lng:7.010175000000004},r={url:"img/default-face.png",size:new google.maps.Size(64,64),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,64)};o.details={},o.skillQuery="";var n=[],i=!1;this.searchCustomer=function(){console.log("search customer"),o.details.geometry&&(s=o.details.geometry.location,i=!0);var t="http://localhost:9000/api/mongo/employees";if(o.skillQuery){for(var r=o.skillQuery.toLowerCase().split(","),c="",a=0;a<r.length;a++){var m=r[a].trim();c+="&skills="+m}t="http://localhost:9000/api/mongo/search/employees/skills?"+c}e.get(t).success(function(e){console.log("Get employees from backend"),n=e,l()})},google.maps.event.addDomListener(window,"load",l)}])}(),function(){"use strict";var e=angular.module("employee-directives",[]);e.directive("navigation",function(){return{restrict:"E",templateUrl:"navigation.html"}}),e.directive("employeeTable",function(){return{restrict:"E",templateUrl:"employee-table.html"}}),e.directive("customerTable",function(){return{restrict:"E",templateUrl:"customer-table.html"}}),e.directive("employeeList",function(){return{restrict:"E",templateUrl:"employee-list.html"}}),e.directive("employeeForm",function(){return{restrict:"E",templateUrl:"employee-form.html"}}),e.directive("skillForm",function(){return{restrict:"E",templateUrl:"skill-form.html"}}),e.directive("projectForm",function(){return{restrict:"E",templateUrl:"project-form.html"}}),e.directive("homeaddressForm",function(){return{restrict:"E",templateUrl:"homeaddress-form.html"}}),e.directive("searchaddressForm",function(){return{restrict:"E",templateUrl:"searchaddress-form.html"}})}(),function(){"use strict";angular.module("project-staffing").config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/index.html"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardController",controllerAs:"dashboardCtrl"}).when("/list-employees",{templateUrl:"views/list_employees.html",controller:"EmployeeController",controllerAs:"employeeCtrl"}).when("/add-employee",{templateUrl:"views/add_employee.html",controller:"EmployeeController",controllerAs:"employeeCtrl"}).when("/list-customers",{templateUrl:"views/list_customers.html",controller:"CustomerController",controllerAs:"customerCtrl"}).when("/staffing",{templateUrl:"views/staff_project.html",controller:"StaffingController",controllerAs:"staffingCtrl"}).when("/add-customer",{templateUrl:"views/add_customer.html",controller:"CustomerController",controllerAs:"customerCtrl"}).when("/help",{templateUrl:"views/help.html"}).otherwise({redirectTo:"/"})}])}();