!function(){"use strict";angular.module("project-staffing",["ngRoute","ngAutocomplete","employee-directives","ngAnimate"])}(),function(){"use strict";angular.module("project-staffing").controller("AddressController",["$http","$scope",function(e,t){t.result="",t.details={},t.options={},t.form={type:"geocode",watchEnter:!0},this.saveAddress=function(o){console.log("update existing employee"),console.log(t.details),o.homeaddress=t.details.geometry.location,e.post("http://localhost:9000/api/mongo/employees/"+o._id,JSON.stringify(o))}}])}(),function(){"use strict";angular.module("project-staffing").controller("EmployeeController",["$http",function(e){var t=this;this.tab=1,this.employees=t.employees,this.employee={},t.employees=[],e.get("http://localhost:9000/api/mongo/employees").success(function(e){console.log("Get all employees from backend"),t.employees=e}),this.showTabs=function(){return console.log("show tabs"),void 0===this.employee._id?!1:!0},this.editEmployee=function(e){for(var t in this.employees)this.employees[t]._id===e&&(console.log("Edit Employee"),this.employee=this.employees[t])},this.resetForm=function(){this.employee={}},this.addEmployee=function(){void 0===this.employee._id?(console.log("add new employee"),e.post("http://localhost:9000/api/mongo/employees",JSON.stringify(this.employee))):(console.log("update existing employee"),e.post("http://localhost:9000/api/mongo/employees/"+this.employee._id,JSON.stringify(this.employee))),e.get("http://localhost:9000/api/mongo/employees").success(function(e){console.log("Update all employees from backend"),t.employees=e}),this.employee={}},this.deleteEmployee=function(t){console.log("Delete employee with id: "+JSON.stringify(t)),e.delete("http://localhost:9000/api/mongo/employees/"+t);for(var o in this.employees)console.log(this.employees[o]),console.log(o),this.employees[o]._id===t&&(console.log("Delete item from array"),this.employees.splice(o,1))}}])}(),function(){"use strict";angular.module("project-staffing").controller("NavigationController",["$scope",function(e){e.active="",e.set=function(t){e.active=t}}])}(),function(){"use strict";angular.module("project-staffing").controller("ProjectController",["$http",function(e){this.deleteProject=function(t,o){console.log("delete project "+t),console.log(o.projects[t]),o.projects.splice(t,1),e.post("http://localhost:9000/api/mongo/employees/"+o._id+"/projects",JSON.stringify(o))},this.addProject=function(t){console.log(t),null==t.projects&&(t.projects=[]),t.projects.push(this.project),e.post("http://localhost:9000/api/mongo/employees/"+t._id+"/projects",JSON.stringify(t)),this.project={}}}])}(),function(){"use strict";angular.module("project-staffing").controller("SkillController",["$http",function(e){this.skill="",this.deleteSkill=function(t,o){console.log("delete skill "+t),console.log(o.skills[t]),o.skills.splice(t,1),e.post("http://localhost:9000/api/mongo/employees/"+o._id+"/skills",JSON.stringify(o))},this.addSkill=function(t){for(var o in t.skills)if(o===this.skill)return;null==t.skills&&(t.skills=[]),t.skills.push(this.skill),e.post("http://localhost:9000/api/mongo/employees/"+t._id+"/skills",JSON.stringify(t)),this.skill=""}}])}(),function(){"use strict";angular.module("project-staffing").controller("StaffingController",["$http","$scope","$filter",function(e,t,o){function l(){console.log("initialze "+t.skillQuery);var l="http://localhost:9000/api/mongo/employees";if(t.skillQuery){var r=t.skillQuery.toLowerCase().split(",");console.log("QUERY "+a);for(var a="",c=0;c<r.length;c++){var p=r[c].trim();a+="&skills="+p}l="http://localhost:9000/api/mongo/search/employees/skills?"+a}console.log("searchUrl"+l),e.get(l).success(function(e){console.log("Get employees from backend"),i.employees=e}),console.log("Current Map Center location"),console.log(s);var m={zoom:9,center:s,mapTypeId:google.maps.MapTypeId.ROADMAP},d=new google.maps.Map(document.getElementById("map-canvas"),m),h={strokeColor:"#4CC417",strokeOpacity:.8,strokeWeight:2,fillColor:"#4CC417",fillOpacity:.35,map:d,center:s,radius:5e4};n=new google.maps.Circle(h);var g=new google.maps.Marker({position:s,map:d,title:"Customer"}),u=new google.maps.InfoWindow({content:"<b>Company 1</b><ul><li>Project: Hurrican</li><li>Java</li><li>HTML, CSS, JavaScript</li></ul>"});google.maps.event.addListener(g,"click",function(){u.open(d,g)});var f,y,v,k={url:"http://avatars.yandex.net/get-avatar/81634860/f30c9984082194d1e18aa03b3e53934d.4011-middle",size:new google.maps.Size(64,64),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,64)},w=new google.maps.InfoWindow;for(y=0;y<i.employees.length;y++)v=i.employees[y],f=new google.maps.Marker({position:new google.maps.LatLng(v.homeaddress.k,v.homeaddress.A),map:d,icon:k,title:v.name}),google.maps.event.addListener(f,"click",function(e,t){return function(){var l=i.employees[t],s="<p><b>"+l.name+"</b></p>";if(l.skills){s+='<p><span class="label label-success">Skills</span><table class="table"><tr><td>';for(var r=0;r<l.skills.length;r++)s+=l.skills[r]+", ";s=s.slice(0,-2),s+="</td></tr></table></p>"}else s+="<br>No skills.";if(l.projects){s+='<p><span class="label label-success">Projects</span><table class="table">',console.log("sort projects "+l.projects.length),l.projects.sort(function(e,t){return e.start<t.start?1:0});for(var r=0;r<l.projects.length;r++){console.log(o("date")(l.projects[r].end,"yyyy-MM-dd"));var n=l.projects[r].start,a=l.projects[r].end;void 0===a&&(a="Current");var c=l.projects[r].name;s+='<tr><td><span class="label label-primary">'+o("date")(n,"yyyy-MM-dd")+"</span></td>",s+='<td><span class="label label-info">'+o("date")(a,"yyyy-MM-dd")+"</span></td><td>"+c+"</td></tr>"}s+="</table></p>"}else s+="<br>No projects.";w.setContent(s),w.open(d,e)}}(f,y))}console.log("Staffing Controller"),this.test=10;var s={lat:51.161295,lng:7.010175000000004};t.details={},t.skillQuery="",this.searchCustomer=function(){console.log("search customer"),console.log("search with skills "+t.skillQuery),t.details.geometry&&(s=t.details.geometry.location),l()};var i=this;this.employees=i.employees,i.employees=[];var r={};r.company1={center:s,name:"Provinzial"};var n;google.maps.event.addDomListener(window,"load",l),this.refreshMap=function(){l()}}])}(),function(){"use strict";var e=angular.module("employee-directives",[]);e.directive("navigation",function(){return{restrict:"E",templateUrl:"navigation.html"}}),e.directive("employeeTable",function(){return{restrict:"E",templateUrl:"employee-table.html"}}),e.directive("employeeList",function(){return{restrict:"E",templateUrl:"employee-list.html"}}),e.directive("employeeForm",function(){return{restrict:"E",templateUrl:"employee-form.html"}}),e.directive("skillForm",function(){return{restrict:"E",templateUrl:"skill-form.html"}}),e.directive("projectForm",function(){return{restrict:"E",templateUrl:"project-form.html"}}),e.directive("homeaddressForm",function(){return{restrict:"E",templateUrl:"homeaddress-form.html"}}),e.directive("searchaddressForm",function(){return{restrict:"E",templateUrl:"searchaddress-form.html"}})}(),function(){"use strict";angular.module("project-staffing").config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/index.html"}).when("/dashboard",{templateUrl:"views/dashboard.html"}).when("/list-employees",{templateUrl:"views/list_employees.html",controller:"EmployeeController",controllerAs:"employeeCtrl"}).when("/add-employee",{templateUrl:"views/add_employee.html",controller:"EmployeeController",controllerAs:"employeeCtrl"}).when("/list-customers",{templateUrl:"views/list_customers.html"}).when("/staffing",{templateUrl:"views/staff_project.html",controller:"StaffingController",controllerAs:"staffingCtrl"}).when("/add-customer",{templateUrl:"views/add_customer.html"}).when("/help",{templateUrl:"views/help.html"}).otherwise({redirectTo:"/"})}])}();