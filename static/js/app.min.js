!function(){"use strict";angular.module("project-staffing",["ngRoute","ngAutocomplete","employee-directives","ngAnimate"])}(),function(){"use strict";var e=angular.module("employee-directives",[]);e.directive("navigation",function(){return{restrict:"E",templateUrl:"navigation.html"}}),e.directive("employeeTable",function(){return{restrict:"E",templateUrl:"employee-table.html"}}),e.directive("employeeList",function(){return{restrict:"E",templateUrl:"employee-list.html"}}),e.directive("employeeForm",function(){return{restrict:"E",templateUrl:"employee-form.html"}}),e.directive("skillForm",function(){return{restrict:"E",templateUrl:"skill-form.html"}}),e.directive("projectForm",function(){return{restrict:"E",templateUrl:"project-form.html"}}),e.directive("homeaddressForm",function(){return{restrict:"E",templateUrl:"homeaddress-form.html"}}),e.directive("searchaddressForm",function(){return{restrict:"E",templateUrl:"searchaddress-form.html"}})}(),function(){"use strict";angular.module("project-staffing").config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/index.html"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardController",controllerAs:"dashboardCtrl"}).when("/list-employees",{templateUrl:"views/list_employees.html",controller:"EmployeeController",controllerAs:"employeeCtrl"}).when("/add-employee",{templateUrl:"views/add_employee.html",controller:"EmployeeController",controllerAs:"employeeCtrl"}).when("/list-customers",{templateUrl:"views/list_customers.html",controller:"CustomerController",controllerAs:"customerCtrl"}).when("/staffing",{templateUrl:"views/staff_project.html",controller:"StaffingController",controllerAs:"staffingCtrl"}).when("/add-customer",{templateUrl:"views/add_customer.html",controller:"CustomerController",controllerAs:"customerCtrl"}).when("/help",{templateUrl:"views/help.html"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("project-staffing").controller("AddressController",["$http","$scope",function(e,t){t.result="",t.details={},t.options={},t.form={type:"geocode",watchEnter:!0},this.saveAddress=function(o){console.log("update existing employee"),console.log(t.details),o.homeaddress=t.details.geometry.location,e.post("http://localhost:9000/api/mongo/employees/"+o._id,JSON.stringify(o))}}])}(),function(){"use strict";angular.module("project-staffing").controller("CustomerController",["$http","$scope","$filter",function(e,t){console.log("Customer Controller"),this.customer={},t.details={},t.options={},t.form={type:"geocode",watchEnter:!0},this.addCustomer=function(){console.log("add customer"),this.customer.companyaddress=t.details.geometry.location,e.post("http://localhost:9000/api/mongo/customers",JSON.stringify(this.customer))},this.resetForm=function(){console.log("reset form"),this.customer={}}}])}(),function(){"use strict";angular.module("project-staffing").controller("DashboardController",["$http","$scope","$filter",function(){console.log("Dashboard Controller")}])}(),function(){"use strict";angular.module("project-staffing").controller("EmployeeController",["$http",function(e){var t=this;this.tab=1,this.employees=t.employees,this.employee={},t.employees=[],e.get("http://localhost:9000/api/mongo/employees").success(function(e){console.log("Get all employees from backend"),t.employees=e}),this.showTabs=function(){return console.log("show tabs"),void 0===this.employee._id?!1:!0},this.editEmployee=function(e){for(var t in this.employees)this.employees[t]._id===e&&(console.log("Edit Employee"),this.employee=this.employees[t])},this.resetForm=function(){this.employee={}},this.addEmployee=function(){void 0===this.employee._id?(console.log("add new employee"),e.post("http://localhost:9000/api/mongo/employees",JSON.stringify(this.employee))):(console.log("update existing employee"),e.post("http://localhost:9000/api/mongo/employees/"+this.employee._id,JSON.stringify(this.employee))),e.get("http://localhost:9000/api/mongo/employees").success(function(e){console.log("Update all employees from backend"),t.employees=e}),this.employee={}},this.deleteEmployee=function(t){console.log("Delete employee with id: "+JSON.stringify(t)),e.delete("http://localhost:9000/api/mongo/employees/"+t);for(var o in this.employees)console.log(this.employees[o]),console.log(o),this.employees[o]._id===t&&(console.log("Delete item from array"),this.employees.splice(o,1))}}])}(),function(){"use strict";angular.module("project-staffing").controller("NavigationController",["$scope",function(e){e.active="",e.set=function(t){e.active=t}}])}(),function(){"use strict";angular.module("project-staffing").controller("ProjectController",["$http",function(e){this.deleteProject=function(t,o){console.log("delete project "+t),console.log(o.projects[t]),o.projects.splice(t,1),e.post("http://localhost:9000/api/mongo/employees/"+o._id+"/projects",JSON.stringify(o))},this.addProject=function(t){console.log(t),null==t.projects&&(t.projects=[]),t.projects.push(this.project),e.post("http://localhost:9000/api/mongo/employees/"+t._id+"/projects",JSON.stringify(t)),this.project={}}}])}(),function(){"use strict";angular.module("project-staffing").controller("SkillController",["$http",function(e){this.skill="",this.deleteSkill=function(t,o){console.log("delete skill "+t),console.log(o.skills[t]),o.skills.splice(t,1),e.post("http://localhost:9000/api/mongo/employees/"+o._id+"/skills",JSON.stringify(o))},this.addSkill=function(t){for(var o in t.skills)if(o===this.skill)return;null==t.skills&&(t.skills=[]),t.skills.push(this.skill),e.post("http://localhost:9000/api/mongo/employees/"+t._id+"/skills",JSON.stringify(t)),this.skill=""}}])}(),function(){"use strict";angular.module("project-staffing").controller("StaffingController",["$http","$scope","$filter",function(e,t,o){function l(){console.log("initialze map");var e={zoom:9,center:s,mapTypeId:google.maps.MapTypeId.ROADMAP},t=new google.maps.Map(document.getElementById("map-canvas"),e);if(n){var l={strokeColor:"#4CC417",strokeOpacity:.8,strokeWeight:2,fillColor:"#4CC417",fillOpacity:.35,map:t,center:s,radius:5e4};google.maps.Circle(l),google.maps.Marker({position:s,map:t,title:"Selected Customer"})}var a,c,p,m=new google.maps.InfoWindow;for(c=0;c<i.length;c++)p=i[c],a=new google.maps.Marker({position:new google.maps.LatLng(p.homeaddress.k,p.homeaddress.A),map:t,icon:r,title:p.name}),google.maps.event.addListener(a,"click",function(e,l){return function(){var s=i[l],r="<p><b>"+s.name+"</b></p>";if(s.skills){r+='<p><span class="label label-success">Skills</span><table class="table"><tr><td>';for(var n=0;n<s.skills.length;n++)r+=s.skills[n]+", ";r=r.slice(0,-2),r+="</td></tr></table></p>"}else r+="<br>No skills.";if(s.projects){r+='<p><span class="label label-success">Projects</span><table class="table">',s.projects.sort(function(e,t){return e.start<t.start?1:0});for(var a=0;a<s.projects.length;a++){var c=s.projects[a].start,p=s.projects[a].end;void 0===p&&(p="Current");var d=s.projects[a].name;r+='<tr><td><span class="label label-primary">'+o("date")(c,"yyyy-MM-dd")+"</span></td>",r+='<td><span class="label label-info">'+o("date")(p,"yyyy-MM-dd")+"</span></td><td>"+d+"</td></tr>"}r+="</table></p>"}else r+="<br>No projects.";m.setContent(r),m.open(t,e)}}(a,c))}console.log("Staffing Controller");var s={lat:51.161295,lng:7.010175000000004},r={url:"img/default-face.png",size:new google.maps.Size(64,64),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,64)};t.details={},t.skillQuery="";var i=[],n=!1;this.searchCustomer=function(){console.log("search customer"),t.details.geometry&&(s=t.details.geometry.location,n=!0);var o="http://localhost:9000/api/mongo/employees";if(t.skillQuery){for(var r=t.skillQuery.toLowerCase().split(","),a="",c=0;c<r.length;c++){var p=r[c].trim();a+="&skills="+p}o="http://localhost:9000/api/mongo/search/employees/skills?"+a}e.get(o).success(function(e){console.log("Get employees from backend"),i=e,l()})},google.maps.event.addDomListener(window,"load",l)}])}();